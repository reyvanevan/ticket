<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">

  <!--feather icons cdn-->
  <script src="https://unpkg.com/feather-icons"></script>

  <!--font awesome cdn-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!--google fonts link-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&family=Roboto:wght@100;300;400;500;700;900&display=swap"
    rel="stylesheet">

  <title>Verifikasi Pembayaran - UMbandung Festival 2025</title>

  <style>
    /* Verification Page Styles */
    .verification-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }

    .verification-container {
      max-width: 600px;
      width: 100%;
      text-align: center;
    }

    .verification-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 3rem 2rem;
      animation: slideUp 0.6s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .verification-icon {
      font-size: 4rem;
      margin-bottom: 1.5rem;
      animation: bounce 2s infinite;
    }

    .verification-icon.success {
      color: #4caf50;
    }

    .verification-icon.pending {
      color: var(--primary);
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-20px);
      }
    }

    .verification-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 1rem;
    }

    .verification-subtitle {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .order-number-display {
      background: rgba(234, 80, 35, 0.1);
      border: 2px solid var(--primary);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 2rem 0;
    }

    .order-number-label {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .order-number-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      font-family: 'Courier New', monospace;
      word-break: break-all;
    }

    .verification-steps {
      text-align: left;
      margin: 2rem 0;
      background: rgba(255, 255, 255, 0.02);
      padding: 1.5rem;
      border-radius: 12px;
    }

    .verification-steps h3 {
      color: #fff;
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .step-item {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      align-items: flex-start;
    }

    .step-item:last-child {
      margin-bottom: 0;
    }

    .step-number {
      width: 32px;
      height: 32px;
      min-width: 32px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
      font-size: 0.9rem;
    }

    .step-content {
      flex: 1;
    }

    .step-content h4 {
      color: #fff;
      font-size: 0.95rem;
      margin-bottom: 0.3rem;
    }

    .step-content p {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.85rem;
    }

    .contact-info {
      background: rgba(33, 150, 243, 0.1);
      border-left: 4px solid #2196f3;
      padding: 1.5rem;
      border-radius: 8px;
      margin-top: 2rem;
    }

    .contact-info h4 {
      color: #2196f3;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .contact-info p {
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .contact-info a {
      color: #2196f3;
      text-decoration: none;
      font-weight: 600;
    }

    .contact-info a:hover {
      text-decoration: underline;
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn-primary {
      padding: 0.8rem 1.5rem;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(234, 80, 35, 0.3);
    }

    .btn-secondary {
      padding: 0.8rem 1.5rem;
      background: transparent;
      color: #fff;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-secondary:hover {
      border-color: var(--primary);
      color: var(--primary);
    }

    @media (max-width: 768px) {
      .verification-card {
        padding: 2rem 1.5rem;
      }

      .verification-title {
        font-size: 1.5rem;
      }

      .verification-subtitle {
        font-size: 0.95rem;
      }

      .action-buttons {
        flex-direction: column;
      }

      .btn-primary, .btn-secondary {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <nav class="navbar sticky">
    <a href="index.html" class="logo">LENTERA</a>
    <ul class="nav-links close">
      <li><a href="index.html#hero-section">Home</a></li>
      <li><a href="index.html#events">Event</a></li>
      <li><a href="index.html#contact">Kontak</a></li>
    </ul>
    <ul class="nav-icons">
      <li><a href="index.html"><i data-feather="home" class="icon"></i></a></li>
    </ul>
  </nav>

  <section class="verification-section">
    <div class="verification-container">
      <div class="verification-card">
        
        <!-- Pending Verification State -->
        <div id="pendingState" style="display: none;">
          <div class="verification-icon pending">
            <i data-feather="clock"></i>
          </div>

          <h1 class="verification-title">Pembayaran Diterima âœ“</h1>
          
          <p class="verification-subtitle">
            Terima kasih telah melakukan pembayaran! Bukti pembayaran Anda telah kami terima dan sedang dalam proses verifikasi.
          </p>

          <div class="order-number-display">
            <div class="order-number-label">Nomor Pesanan Anda</div>
            <div class="order-number-value" id="displayOrderNumber">UMB20251125XXXXXX</div>
          </div>

          <div class="verification-steps">
            <h3>ðŸ“‹ Status Verifikasi Pembayaran</h3>
            <div class="step-item">
              <div class="step-number">âœ“</div>
              <div class="step-content">
                <h4>Pembayaran Diterima</h4>
                <p>Bukti transfer Anda telah kami terima dan sedang diverifikasi</p>
              </div>
            </div>
            <div class="step-item">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>Menunggu Verifikasi Admin</h4>
                <p>Tim kami akan memverifikasi pembayaran Anda dalam 1x24 jam</p>
              </div>
            </div>
            <div class="step-item">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>E-Ticket Dikirim</h4>
                <p>Setelah verifikasi berhasil, e-ticket akan dikirim ke email Anda</p>
              </div>
            </div>
          </div>

          <div class="contact-info">
            <h4>ðŸ’¡ Informasi Penting</h4>
            <p>âœ“ Cek email Anda (termasuk folder Spam) untuk pemberitahuan verifikasi</p>
            <p>âœ“ Jika ada pertanyaan, hubungi kami via WhatsApp</p>
            <p>âœ“ Simpan nomor pesanan Anda untuk referensi</p>
          </div>

          <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 1.5rem;">
            Estimasi waktu verifikasi: <strong>1x24 jam</strong>
          </p>

          <div class="action-buttons">
            <a href="index.html" class="btn-secondary">
              <i data-feather="arrow-left"></i>
              Kembali ke Home
            </a>
            <a href="https://wa.me/6285726132201?text=Saya%20ingin%20menanyakan%20status%20tiket%20saya" target="_blank" class="btn-primary">
              <i data-feather="message-circle"></i>
              Chat Admin
            </a>
          </div>
        </div>

        <!-- Success State (After Admin Approval) -->
        <div id="successState" style="display: none;">
          <div class="verification-icon success">
            <i data-feather="check-circle"></i>
          </div>

          <h1 class="verification-title">Pembayaran Terverifikasi âœ“</h1>
          
          <p class="verification-subtitle">
            Selamat! Pembayaran Anda telah diverifikasi oleh admin. E-ticket Anda akan segera dikirim ke email.
          </p>

          <div class="order-number-display">
            <div class="order-number-label">Nomor Pesanan</div>
            <div class="order-number-value" id="successOrderNumber">UMB20251125XXXXXX</div>
          </div>

          <div class="verification-steps">
            <h3>âœ“ Status Pesanan Anda</h3>
            <div class="step-item">
              <div class="step-number" style="background: #4caf50;">âœ“</div>
              <div class="step-content">
                <h4>Pembayaran Terverifikasi</h4>
                <p>Pembayaran Anda telah dikonfirmasi oleh tim kami</p>
              </div>
            </div>
            <div class="step-item">
              <div class="step-number" style="background: #4caf50;">âœ“</div>
              <div class="step-content">
                <h4>E-Ticket Telah Dikirim</h4>
                <p>E-ticket dan detail acara sudah dikirim ke email Anda</p>
              </div>
            </div>
            <div class="step-item">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>Siap Menghadiri Event</h4>
                <p>Pastikan Anda membawa e-ticket saat tiba di lokasi</p>
              </div>
            </div>
          </div>

          <div class="contact-info">
            <h4>ðŸŽ« Langkah Selanjutnya</h4>
            <p>âœ“ Cek email Anda untuk e-ticket (termasuk folder Spam)</p>
            <p>âœ“ Download atau screenshot e-ticket untuk dibawa saat event</p>
            <p>âœ“ Pastikan datang 15 menit lebih awal dari acara dimulai</p>
          </div>

          <div class="action-buttons">
            <a href="index.html" class="btn-secondary">
              <i data-feather="arrow-left"></i>
              Kembali ke Home
            </a>
            <a href="https://wa.me/6285726132201" target="_blank" class="btn-primary">
              <i data-feather="message-circle"></i>
              Hubungi Admin
            </a>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!--JavaScript -->
  <script>
    feather.replace()
  </script>

  <script src="./js/config.js"></script>
  <script src="./js/utils.js"></script>
  <script src="./js/script.js"></script>

  <script>
    // Load order data and determine state
    document.addEventListener('DOMContentLoaded', function() {
      const completeOrderData = getStorageData(CONFIG.storage.completeOrderData);

      if (!completeOrderData) {
        // No order data, redirect
        alert('Data pesanan tidak ditemukan');
        window.location.href = 'index.html';
        return;
      }

      // Display order number
      const orderNumber = completeOrderData.orderNumber;
      document.getElementById('displayOrderNumber').textContent = orderNumber;
      document.getElementById('successOrderNumber').textContent = orderNumber;

      // Determine state: pending or verified
      const isVerified = completeOrderData.status === CONFIG.orderStatus.VERIFIED;

      if (isVerified) {
        // Show success state
        document.getElementById('successState').style.display = 'block';
      } else {
        // Show pending state (default)
        document.getElementById('pendingState').style.display = 'block';

        // Poll for verification status every 5 seconds
        // This checks if admin has approved the order
        const pollInterval = setInterval(function() {
          const updatedOrderData = getStorageData(CONFIG.storage.completeOrderData);
          
          if (updatedOrderData && updatedOrderData.status === CONFIG.orderStatus.VERIFIED) {
            // Order was verified! Switch to success state
            clearInterval(pollInterval);
            
            // Animate transition
            document.getElementById('pendingState').style.display = 'none';
            document.getElementById('successState').style.display = 'block';
            
            // Show notification
            if (typeof feather !== 'undefined') {
              feather.replace();
            }
            
            console.log('âœ… Order verified by admin!');
          }
        }, 5000); // Check every 5 seconds
      }
    });
  </script>

</body>
</html>
